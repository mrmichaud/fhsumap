
<!DOCTYPE html>
<!--*Add a < back to the beginning and put above doctype -  ?php require_once('mapPullFromDB.php'); ?>-->
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Fort Hays State University Campus Map</title>
    <link rel="icon" href="./siteImages/tiger.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- These five 'meta' below is about facebook share  -->
    <meta property="og:url" content="https://www.your-domain.com/your-page.html" />
    <meta property="og:type" content="Fort Hays State University Campus Map" />
    <meta property="og:title" content="Fort Hays State University Campus Map" />
    <meta property="og:description" content="Fort Hays State University Campus Map" />
    <meta property="og:image" content="https://www.your-domain.com/path/image.jpg" />
    <link href="https://fonts.googleapis.com/css?family=Anton|Athiti" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="./css/bootstrap-4.1.3.css">
    <link rel="stylesheet" href="./css/fontawesome-free-5.4.2-web-all.css">
    <link rel="stylesheet" type="text/css" media="screen" href="./css/main.css" />
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="icon/64.png" sizes="64x64">
    <link rel="apple-touch-icon" href="icon/128.png" sizes="128x128">
    <link rel="apple-touch-icon" href="icon/194.png" sizes="194x194">
    <link rel="apple-touch-icon" href="icon/256.png" sizes="256x256">
    <link rel="apple-touch-icon" href="icon/512.png" sizes="512x512">
    <link rel="apple-touch-icon" href="icon/1024.png" sizes="1024x1024">
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="./css/N-main.css" /> -->
</head>

<body>
    <!-- facebook share button, this code must be here according Facebook Developer JavaScript SDK -->
    <div id="fb-root"></div>	
    <!-- ---------------------------------Desk---------------------------- -->
    <header>
        <nav class="navbar navbar-expand-xs fixed-top" id="top-navbar">
            <div class="navbar-brand d-none d-xl-block">
                <a href="#" class="pull-left nav-sb-menu" style="padding:5px" data-label="hamburger"><i class="fa fa-bars fa-sm" aria-hidden="true"></i></a>
                <div class="form-inline d-none d-sm-inline">
                    <input id="headerSearchBarInput" class="form-control" type="text" placeholder="Search..." aria-label="Search" />
                    <button id="searchButton" class="btn" type="button"><i class="fa fa-search fa-lg" aria-hidden="true"></i></button>
                </div>
            </div>
            <ul class="navbar-nav mr-auto d-none d-xl-block">
                <li class="nav-item nav-sb-menu" data-label="layers">
                    <i class="fas fa-layer-group" aria-hidden="true"></i>
                    <span class="js-text">Layers</span>
                </li>
                <li class="nav-item nav-sb-menu" data-label="building">
                    <i class="fas fa-building" aria-hidden="true"></i>
                    <span class="js-text">Buildings</span>
                </li>
                <li class="nav-item nav-sb-menu" data-label="parking">
                    <i class="fas fa-car fa-lg" aria-hidden="true"></i>
                    <span class="js-text">Parking Lots</span>
                </li>
                <li class="nav-item nav-sb-menu" data-label="direction">
                    <i class="fas fa-route fa-lg" aria-hidden="true"></i>
                    <span class="js-text">Walking Directions</span>
                </li>
                <li class="nav-item nav-sb-menu" data-label="tour">
                    <i class="fas fa-walking fa-lg" aria-hidden="true"></i>
                    <span class="js-text">Tour</span>
                </li>
            </ul>
            <div class="nav-item float-right" id="d-tiger">
                <img src="./siteImages/tiger.png" alt="tiger">
                <span class="js-text">Fort Hays State University Campus Map</span>
            </div>
            <div class="nav-item d-block d-xl-none float-right">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
        </nav>
    </header>

    <!-- Sidebar -->

    <div id="sidebar" class="sidebar">
		<!-- the code below will use in "N-spa.js" -->
        <div id="sidebar-hamburger" class="sidebar-content" style="display:none">Some content for main menu</div>
        <!-- the code above will use in "N-spa.js" -->
        <div id="sidebar-search" class="sidebar-content" style="display:none">Some content for search</div>
        <div id="sidebar-layers" class="sidebar-content">Some content for layers</div>
        <div id="sidebar-building" class="sidebar-content" style="display:none">Some content for buildings</div>
        <div id="sidebar-direction" class="sidebar-content" style="display:none">Some content for directions</div>
        <div id="sidebar-parking" class="sidebar-content" style="display:none">Some content for parking</div>
        <div id="sidebar-tour" class="sidebar-content" style="display:none">Some content for tours</div>
    </div>
    <!--Google map area -->
    <div id="map"></div>
    <!-- ----------------------------Mobile--------------------------------- -->
    <footer>
        <nav class="navbar d-block d-xl-none fixed-bottom">
            <div class="navbar-nav d-flex flex-row justify-content-around" id="m-b-navbar">

                <div class="nav-item nav-sb-menu d-flex justify-content-around" data-label="layers">
                    <i class="fas fa-layer-group"></i>
                    <span class="js-text">Layers</span>
                </div>

                <div class="nav-item nav-sb-menu d-flex justify-content-around" data-label="building">
                    <i class="fa fa-building" aria-hidden="true"></i>
                    <span class="js-text">Building</span>
                </div>

                <div class="nav-item nav-sb-menu d-flex justify-content-around" data-label="parking">
                    <i class="fas fa-car fa-lg"></i>
                    <span class="js-text">Parking</span>
                </div>

                <div class="nav-item nav-sb-menu d-flex justify-content-around" data-label="direction">
                    <i class="fas fa-route fa-lg"></i>
                    <span class="js-text">Direction</span>
                </div>

                <div class="nav-item nav-sb-menu d-flex justify-content-around" data-label="tour">
                    <i class="fas fa-walking fa-lg"></i>
                    <span class="js-text">Tour</span>
                </div>

                <div class="nav-item nav-sb-menu d-flex justify-content-around" data-label="search">
                    <i class="fas fa-search"></i>
                    <span class="js-text">Search</span>
                </div>

            </div>
        </nav>
    </footer>

    <script src="./js/jquery-3.3.1.js"></script>

    <!--<script type="text/javascript" src="js/current.js"></script>-->
    <script src="js/mustache.min.js">
	</script>
	
	<script>
		/***********************
		DECLARE GLOBAL VARIABLES TO STORE GEO DATA
		***********************/
		
		var NUMBER_OF_BUILDINGS = 40;
		var NUMBER_OF_TOUR_STOPS = 9;
		
		var MAP_ZOOM = 17;
		var MAP_CENTER_COORDINATES = {lat: 38.8720, lng: -99.34238};
		
		var BUILDING_SELECTED_BORDER_SIZE = 4;
		var BUILDING_SELECTED_BORDER_COLOR = "#000000";
		var BUILDING_SELECTED_BORDER_OPACITY = 1.0;
		var BUILDING_SELECTED_FILL_COLOR = '#eaaf0f';
		var BUILDING_SELECTED_FILL_OPACITY = 0.9;
		
		var BUILDING_UNSELECTED_BORDER_SIZE = 3;
		var BUILDING_UNSELECTED_BORDER_COLOR = "#eaaf0f";
		var BUILDING_UNSELECTED_BORDER_OPACITY = 1.0;
		var BUILDING_UNSELECTED_FILL_COLOR = '#000000';
		var BUILDING_UNSELECTED_FILL_OPACITY = 0.75;
			
		var TOUR_PATH_SIZE = 5;
		var TOUR_PATH_COLOR = "#eaaf0f";
		var TOUR_FILL_COLOR = '#000000';
		var TOUR_FILL_OPACITY = 0.75;
		
		
		var PARKING_SELECTED_BORDER_SIZE = 3;
		var PARKING_SELECTED_BORDER_COLOR = "#ffffff";
		var PARKING_SELECTED_BORDER_OPACITY = 1.0;
		var PARKING_SELECTED_FILL_COLOR = '#eaaf0f';
		var PARKING_SELECTED_FILL_OPACITY = 0.75;
		
		var PARKING_UNSELECTED_BORDER_SIZE = 3;
		var PARKING_UNSELECTED_BORDER_COLOR = "#eaaf0f";
		var PARKING_UNSELECTED_BORDER_OPACITY = 1.0;
		var PARKING_UNSELECTED_FILL_COLOR = '#000000';
		var PARKING_UNSELECTED_FILL_OPACITY = 0.75;
		
		
		var POLYGON_SELECTED_BORDER_SIZE = 3;
		var POLYGON_SELECTED_BORDER_COLOR = "#ff0000";
		var POLYGON_SELECTED_BORDER_OPACITY = 1.0;
		var POLYGON_SELECTED_FILL_COLOR = '#00ff00';
		var POLYGON_SELECTED_FILL_OPACITY = 0.75;
		
		var POLYGON_UNSELECTED_BORDER_SIZE = 3;
		var POLYGON_UNSELECTED_BORDER_COLOR = "#00ff00";
		var POLYGON_UNSELECTED_BORDER_OPACITY = 1.0;
		var POLYGON_UNSELECTED_FILL_COLOR = '#ff0000';
		var POLYGON_UNSELECTED_FILL_OPACITY = 0.75;
		
		
		var CIRCLE_PATH_SIZE = 2;
		var CIRCLE_PATH_COLOR = "#ff0000";
		var CIRCLE_FILL_COLOR = '#ff0000';
		var CIRCLE_FILL_OPACITY = 0.35;
		
			
		// This section declares each of the arrays used to hold building information
		var buildingNames = {}; 
		var latLngCenter = {};
		var latLngMainEntrance = {}; 
		var buildingOutline = {};
		var infoBoxString = {};
		var picture = {}; 

		//var markersCenter = {}; 
		var markersEntrance = {};
		var listeners = {};
		var infoLinkString = {};
		var contentString = "";
		var outlineEdge = [];
		var polylinePath = [];
		var polygonOutline = [];
		var outlineEdgeHighlighted = [];
		var parkingOutline = [];
		var circleOutline = [];
		var poiMarker = [];
		
		var activeCategories = [];
		
		//Campus Tour Variables
		var campusTourCoordinates = [];
		var campusTourPath;
		var lineSymbol;
		var arrowSymbol;
		var tourMarkers = new Array(NUMBER_OF_TOUR_STOPS);
		var videoTourMarkers = new Array(NUMBER_OF_TOUR_STOPS);
		var tourContentString = new Array(NUMBER_OF_TOUR_STOPS);
		var videoTourContentString = new Array(NUMBER_OF_TOUR_STOPS);
		
		//Category Interactions Variables
		var active_CampusTour = false;
		var active_VideoTour = false;
		var active_Academic = false;
		var active_Athletics = false;
		var active_PlacesOfInterest = false;
		var active_ResidenceBuildings = false;
		var active_ServiceBuildings = false;
		var active_Food = false;
		var active_EntranceMarkers = false;
		var active_BuildingMarkers = false;
		var active_TourMarkers = false;
		var active_VideoTourMarkers = false;
		var active_CampusParking = false;
		
		var categoryStateBeforeSearch;
		var walkingStateBeforeSearch;
		
		//Walking Directions variables
		var directionsService;
		// Create a renderer for directions and bind it to the map.
		var directionsDisplay;
		// Instantiate an info window to hold step text.
		var stepDisplay;
		var markerArray;
		var startEndMarkerArray = [];
		var map;

		var currentPosition;
		
		var searchResults = [];
		var DataTypesInformation;
		var CampusTourInformation;
		var VideoTourInformation;
		var CampusParkingInformation;
		var x;
		var y;
		
		var buildingStates = [];
		var buildingHighlightedStates = [];
		var poiStates = [];
		var circleStates = [];
		var polylineStates = [];
		var polygonStates = [];
		var parkingStates = [];
		var layersMenuOptionsStates = [];
		var toursMenuOptionsStates = [];
		var layersArray = [];
		var alreadyDrawn = [];
		
		
	</script>
	
	<script>
	//----------TEMPLATES BUILT WITH MUSTACHE : Build menu buttons and hamburger menu dynamically with data from JSON-----------
	//Template for main menu/hamburger button
	$.getJSON( "json_fhsuFakeStudentData.json", function( data ) {
		var templateCategories = '<h3>Main Menu</h3>'+
		'<div><h4 class="sidebarOption" id="toggle-student-info" >Student Information</h4>' +
			'<table  class="student-info">' +
				'<tr>' +
                    '<td>Student Name:</td>' +
                    '<td>{{firstName}} {{lastName}}</td>' +
                '</tr>' +
				'{{#classes}}' +
				'<th colspan="2">{{classCode}}: {{title}}</th>' +
                '<tr>' +
                    '<td>Location: </td>' +
                    '<td><div class="sidebarOption" onClick="toggleBuildingHighlighted(\'{{building}}\')">{{building}} {{room}}</div></td>' +
                '</tr>' +
                '<tr>' +
                    '<td>Time: </td>' +
                    '<td>{{#days}} {{{processDays}}} {{/days}}</td>' +
                '</tr>' +
                '<tr>' +
                    '<td>Instructor: </td>' +
                    '<td>{{instructor}}</td>' +
                '</tr>' +
				'{{/classes}}' +
			'</table>' +
		'</div>' +
		'<div><h4 class="sidebarOption" id="toggle-share">Share</h4>' +
			'<div class="share">' +
				//Facebook share
				'<iframe src="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&layout=button_count&size=small&mobile_iframe=true&width=88&height=20&appId" width="88" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>' +
				//Twitter share 
				'<div class="">' +
					'<a style="background-color:#000" class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Hello%20world" data-size="large">Tweet</a>' +
				'</div>' +
            '</div>' +        
		'</div>' +
		'<div><h4 class="sidebarOption" id="toggle-about">About</h4>' +
			'<div class="about">' +
				'<p>Insert about info here... </p>' +
			'</div></div>' +
		'<div><h4 class="sidebarOption" id="toggle-help">Help</h4>' +
			'<div class="help"><h5>Contact the Institute for New Media Studies:</h5> ' +
				'<p>Location: Malloy Hall Room 106</p>' + 
				'<p>Email: newmedia@fhsu.edu</p>' +
				'<p>Phone: 785-628-4784</p>' +
			'</div></div>' +
		'<div><h4 class="sidebarOption" id="toggle-version">Version</h4>' +
			'<div id="informationCreditsDisplay" class="version" title="About the Next Dimension">' +
				'<p>Created by Monica Michaud, Meng (Ella) Ding, Conner Chessmore, Yangyang Cui</p>' +
				'<p>In the Institute for New Media Studies and Informatics Department</p>' +
				'<p>Advisers: Gordon Carlson, PhD ; Nicholas Caporusso</p>' +
				'<p>Dev Version: 0.2.5 (Dec 6, 2018)</p>' +
			'</div></div>' +
		'{{#personalData}}<li class="sidebarOption">{{label}}</li>{{/personalData}}<br>';
		Mustache.parse(templateCategories);   // optional, speeds up future uses
		data.studentData.processDays = function() {
			var returnContent = "";
			var value=Object.values(this);
			var keys=Object.keys(this);
			//console.log(value);
			if(value[0] && 0 !== value[0].length){//checks if day is not empty
				returnContent += keys[0] + ": " + value[0] + "<br />";
			}
			return returnContent;
		}
		var rendered = Mustache.render(templateCategories, data.studentData);
		$('#sidebar-hamburger').html(rendered);
		$("#walkingDirectionsResultsContainer").hide();
		$(".about").hide();
		$(".help").hide();
		$(".version").hide();
	  
		$(".sidebarOption").click(function(){
			$(this).toggleClass("active");
		});
	  
	});


	/*
	function loadUser() {
	  var template = $('#template').html();
	  Mustache.parse(template);   // optional, speeds up future uses
	  var rendered = Mustache.render(template, {name: "Luke"});
	  $('#target').html(rendered);
	}
	*/
	
	//Templates for various menu tabs:	
	$.getJSON( "json_fhsuDataTypes.json", function( data ) {
		var templateBuildingDirectory = '<h3>Building Directory</h3>{{#buildings}}<li class="sidebarOption toggleBuilding" onClick="toggleBuilding({{id}})">{{buildingName}} ({{code}})</li>{{/buildings}}';
		Mustache.parse(templateBuildingDirectory);   // optional, speeds up future uses
		var rendered = Mustache.render(templateBuildingDirectory, data);
		$('#sidebar-building').html(rendered);

		var templateWalkingDirectionBuildings = '<div id="walkingTitleBar"><div id="walkingTitleText" class="sameLineStyle"><h3>Walking&nbsp;Directions</h3></div>' +
		'<div id="walkingResetButtonContainer" class="sameLineStyle">' +
			'<button id="walkingResetButton" class="resetButtons" type="button" onClick="clearDirections()"><img src="siteImages/white-restart-512.png"></button>' +
		'</div></div>' +
		'<div id="walkingInstructionText">' +
			'<span class="intructionTexts">Select buildings from dropdown menus</span>' +
		'</div>' +
		'<div id="walkingSelectionsContainer">' +
			'<form id="walkingDropdownForm">' +
				'<div id="walkingSelectionsStart">' +
					'<div id="walkingSelectionsStartTitleText">' +
						'<h4 class="walkingDirectionsSelectionHeaders">Start:</h4>' +
					'</div>' +
					'<div id="walkingSelectionsStartDropdownOption">' +
						'<select name="start" id="walkingDirectionsStartInput">' +
							'<option value="0"> Current position</option>' +
							'{{#buildings}}<option value={{id}}>{{buildingName}}</option>{{/buildings}}' +
						'</select>' +
					'</div>' +
				'</div>' +
				'<div id="walkingSelectionsEnd">' +
					'<div id="walkingSelectionsEndTitleText">' +
						'<h4 class="walkingDirectionsSelectionHeaders">End:</h4>' +
					'</div>' +
					'<div id="walkingSelectionsEndDropdownOption">' +
						'<select name="end" id="walkingDirectionsEndInput">' +
							'<option value="0"> Current position</option>' +
							'{{#buildings}}<option value={{id}}>{{buildingName}}</option>{{/buildings}}' +
						'</select>' +
					'</div>' +
				'</div>' +
				'<div id="walkingSelectionsSubmitButtonContainer">' +
					'<button id="walkingSelectionsSubmitButton" type="button" onClick="showWalkingDirections()">Get Directions</button>' +
				'</div>' +
			'</form>' +
		'</div>' +
		//Hidden as default, when walkingSelectionsSubmitButton is clicked/showWalkingDirections() is called, show this div with walking directions panel info in it.
		'<div id="walkingDirectionsResultsContainer">' +
			'<div id="walkingDirectionsPanelTitleTextContainer" class="sameLineStyle">' +
				'<h4 id="walkingDirectionsPanelTitleText">Steps:</h4>' +
			'</div>' +
			'<div class="sameLineStyle">' +
				'<button id="toggleWalkingDirectionsMarkerButton" type="button" onClick="toggleWalkingMarkers()"><img id="toggleDirectionMarkers" src="siteImages/google-map-pointer-grey-th.png"></button>' +
			'</div>' +
			'<div class="sameLineStyle">' +
				'<button id="closeWalkingDirectionsPanelButton" type="button"><img id="closeWalkingPanelImage" src="siteImages/close-button.png"></button>' +
			'</div>' +
			'<div id="walkingStepsContainer">' +
				'<p>No walking results yet - Select above!</p>' +
			'</div>' +			
		'</div>' ;
		Mustache.parse(templateWalkingDirectionBuildings);   // optional, speeds up future uses
		var rendered = Mustache.render(templateWalkingDirectionBuildings, data);
		$('#sidebar-direction').html(rendered);

		var templateParking = '<h3>Parking</h3>{{#buildings}}<li class="sidebarOption" onClick="toggleParking({{id}})">{{buildingName}}</li>{{/buildings}}';
		Mustache.parse(templateParking);   // optional, speeds up future uses
		var rendered = Mustache.render(templateParking, data);
		$('#sidebar-parking').html(rendered);

		var templateCategories = '<h3>Layers</h3>{{#layersMenuOptions}}<li class="sidebarOption" onClick="toggleLayer({{#layerID}}{{.}},{{/layerID}})">{{label}}</li>{{/layersMenuOptions}}<br>'; 
		Mustache.parse(templateCategories);   // optional, speeds up future uses
		var rendered = Mustache.render(templateCategories, data);
		$('#sidebar-layers').html(rendered);
		//console.log(rendered);

		var templateCategories = '<h3>Tours</h3>{{#toursMenuOptions}}<li class="sidebarOption" onClick="toggleTour({{#tourID}}{{.}},{{/tourID}})">{{label}}</li>{{/toursMenuOptions}}<br>';
		Mustache.parse(templateCategories);   // optional, speeds up future uses
		var rendered = Mustache.render(templateCategories, data);
		$('#sidebar-tour').html(rendered);
		//console.log(rendered);
	  
		$(".sidebarOption").click(function(){
			$(this).toggleClass("active");
		});
	  
	});
	</script>
	
	<script>			
		$("#headerSearchBarInput").on("keydown", function(e) {
			if (e.keyCode == 13) { findSearchResults( $(this).val() ); }});	
			
		$("#searchButton").on("click", function(e) {
			 findSearchResults( $("#headerSearchBarInput").val() ); });	
	
		$(function(){
			$.getJSON("json_fhsuFakeStudentData.json" , function(result){
					StudentInformation = result;
					//console.log(StudentInformation);
			});
		});
			
		$(function(){
			$.getJSON("json_fhsuDataTypes.json" , function(result){
				DataTypesInformation = result;
				//console.log(DataTypesInformation);
			
				for (x in DataTypesInformation.layers){
					var newElementsArray = [];
					for (y in DataTypesInformation.layers[x].elements){
						var newLayerElement = {
							type : DataTypesInformation.layers[x].elements[y].type,
							id   : DataTypesInformation.layers[x].elements[y].id,
							state : false					
						}//end var newLayerElement
						newElementsArray.push(newLayerElement);
					}//end for each element in layer
					
					var newLayer = {
						id : DataTypesInformation.layers[x].id,
						elements : newElementsArray
					}//end var newLayer
					layersArray[DataTypesInformation.layers[x].id] = newLayer;
					
					// The following is used in every draw function to check if an object has already been drawn on the map
					//alreadyDrawn = [];			
					//alreadyDrawn.push({type: "building", id: 2});
				}
				console.log(layersArray);

			
				//****CREATE ARRAY FOR EACH DATA TYPE HOLDING EACH OBJECT'S ID AND ACTIVE STATE**************
				//console.log(DataTypesInformation.buildings);
				for (x in DataTypesInformation.buildings){
					//add id and state to builingStates array
					var newBuildingObj = {
						id : DataTypesInformation.buildings[x].id,
						state : false
					}
					buildingStates[DataTypesInformation.buildings[x].id]=newBuildingObj;
					//console.log(buildingStates[DataTypesInformation.buildings.id]);
					//console.log(x.id);
					//console.log(newBuildingObj.id);
					//buildingStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.buildings){
					//add id and state to builingStates array
					var newBuildingHighlightedObj = {
						id : DataTypesInformation.buildings[x].id,
						state : false
					}
					buildingHighlightedStates[DataTypesInformation.buildings[x].id]=newBuildingHighlightedObj;
					//buildingHighlightedStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.pois){
					//add id and state to poiStates array
					var newPoiObj = {
						id : DataTypesInformation.pois[x].id,
						state : false
					}
					poiStates[DataTypesInformation.pois[x].id]=newPoiObj;
					//poiStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.circles){
					//add id and state to circleStates array
					var newCircleObj = {
						id : DataTypesInformation.circles[x].id,
						state : false
					}
					circleStates[DataTypesInformation.circles[x].id]=newCircleObj;
					//circleStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.polylines){
					//add id and state to polylineStates array
					var newPolylineObj = {
						id : DataTypesInformation.polylines[x].id,
						state : false
					}
					polylineStates[DataTypesInformation.polylines[x].id]=newPolylineObj;
					//polylineStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.polygons){
					//add id and state to polygonStates array
					var newPolygonObj = {
						id : DataTypesInformation.polygons[x].id,
						state : false
					}
					polygonStates[DataTypesInformation.polygons[x].id]=newPolygonObj;
					//polygonStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.parking){
					//add id and state to parkingStates array
					var newParkingObj = {
						id : DataTypesInformation.parking[x].id,
						state : false
					}
					parkingStates[DataTypesInformation.parking[x].id]=newParkingObj;
					//parkingStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.layersMenuOptions){
					//add id and state to layersMenuOptionsStates array
					var newLayersMenuOptionsObj = {
						id : DataTypesInformation.layersMenuOptions[x].id,
						state : false
					}
					layersMenuOptionsStates[DataTypesInformation.layersMenuOptions[x].id]=newLayersMenuOptionsObj;
					//layerMenuOptionsStates[idNumber].state = true to set to true
				}
				
				for (x in DataTypesInformation.toursMenuOptions){
					//add id and state to toursMenuOptionsStates array
					var newTourMenuOptionsObj = {
						id : DataTypesInformation.toursMenuOptions[x].id,
						state : false
					}
					toursMenuOptionsStates[DataTypesInformation.toursMenuOptions[x].id]=newTourMenuOptionsObj;
					//toursMenuOptionsStates[idNumber].state = true to set to true
				}			
				
				//**************TESTS FOR EACH DRAW FUNCTION*****************
				
				var test_building_data = getBuildingID(2);
				var test_poi_data = getPOIID(4);
				var test_parking_data = getParkingID(4);
				var test_polylines_data = getPolylineID(2);
				var test_polygons_data = getPolygonID(1);
				var test_circles_data = getCircleID(1);
				
				//drawBuilding (test_building_data, map);
				//drawPOI (test_poi_data, map);
				//drawParking (test_parking_data, map);
				//drawPolyline (test_polylines_data, map);
				//drawPolygon (test_polygons_data, map);
				//drawCircle (test_circles_data, map);
			});
		});		
		
		function findSearchResults( searchQuery ) {
			searchResults = [];
			$("#searchResultsContainer").empty();
			var x;
			var y;
			var z;
			var outputText = "";				
			
				searchQuery = searchQuery.trim();
				
			if( searchQuery.length >= 1 && searchQuery.length <= 255 && typeof searchQuery === "string" ){
			
				for (x in DataTypesInformation.buildings){					
					//call functions to check for various types of matches
					inBuildingNames(x, searchQuery);
					inBuildingCodes(x, searchQuery);
					//inBuildingInfos(x, searchQuery);
				}// end for loop through buildings x
				
				for (y in DataTypesInformation.pois){					
					//call functions to check for various types of matches
					inPOINames(y, searchQuery);
				} // end for loop through pois y
				
				for (z in DataTypesInformation.parking){					
					//call functions to check for various types of matches
					inParkingNames(z, searchQuery);
				} // end for loop through parking z	
			} 
			
			//check if searchResults array is empty-cells
			if(searchResults.length > 0){
				$('.sidebar-content').hide();
				$('#sidebar-search').show();
				
				if (!tabToggle) {
					$('.sidebar').animate({ width: "toggle" });
					tabToggle = !tabToggle;
				}
				
				newDivContent = "";
				newBuildingNameContent = "";
				newBuildingCodeContent = "";
				//newBuildingInformationContent = "";
				newPOINameContent = "";
				newParkingNameContent = "";
				
				for ( y = 0; y < searchResults.length; y++ ){
					//list all buildings included on Name
					if (searchResults[y].type == "BuildingName"){
						newBuildingNameContent += "<p><a href='#' onClick='showSearchResultsBuilding(&apos;" + searchResults[y].code + "&apos;)'>" + searchResults[y].building + "</a></p>";
						//console.log(searchResults[y]);
					}
					//list all buildings included on Code
					if (searchResults[y].type == "BuildingCode"){
						newBuildingCodeContent += "<p><a href='#' onClick='showSearchResultsBuilding(&apos;" + searchResults[y].code + "&apos;)'>" + searchResults[y].building + "</a></p>";
					}
					//list all buildings included on Information
					//if (searchResults[y].type == "Information"){
					//	newInformationContent += "<p><a href='#' onClick='OpenInfoWindow(&apos;" + searchResults[y].code + "&apos;)'>" + searchResults[y].building + "</a></p>";
					//}
					if (searchResults[y].type == "POIName"){
						newPOINameContent += "<p><a href='#' onClick='showSearchResultsPOI(&apos;" + searchResults[y].code + "&apos;)'>" + searchResults[y].building + "</a></p>";
					}
					
					if (searchResults[y].type == "ParkingName"){
						newParkingNameContent += "<p><a href='#' onClick='showSearchResultsParking(&apos;" + searchResults[y].code + "&apos;)'>" + searchResults[y].building + "</a></p>";
					}
					
				}//end for loop through searchResults
				
				
				//Add any building name results to newDivContent
				if(newBuildingNameContent != ""){
					newDivContent += "<h4>Building Names:</h4>" + newBuildingNameContent;
				}
				//Add any building code results to newDivContent
				if(newBuildingCodeContent != ""){
					newDivContent += "<h4>Building Codes:</h4>" + newBuildingCodeContent;
				}
				//if(newBuildingInformationContent != ""){
				//	newDivContent += "<h4>Building Information:</h4>" + newBuildingInformationContent;
				//}
				//Add any poi name results to newDivContent
				if(newPOINameContent != ""){
					newDivContent += "<h4>Points of Interest:</h4>" + newPOINameContent;
				}
				//Add any parking name results to newDivContent
				if(newParkingNameContent != ""){
					newDivContent += "<h4>Parking Lots:</h4>" + newParkingNameContent;
				}
				$("#sidebar-search").html(newDivContent);
				
			}
			else {
				//add "No results were found for: " + searchQuery to searchResultsContainer
				$("#sidebar-search").html("No results found for <br /><b>" + searchQuery + "</b>");	
			}				
		}//end findSearchResults function
		
		function inBuildingNames( x, searchQuery ) {
			if((DataTypesInformation.buildings[x].buildingName.toLowerCase()).includes(searchQuery.toLowerCase())){
				//add Name and building's name to searchResults array
				searchResults.push({type: "BuildingName", building: (DataTypesInformation.buildings[x].buildingName), code: (DataTypesInformation.buildings[x].code)});
			}
		} // end inBuildingNames
		
		function inBuildingCodes( x, searchQuery ) {
			if((DataTypesInformation.buildings[x].code.toLowerCase()) == (searchQuery.toLowerCase())){
				//add Code and building's name to searchResults array
				searchResults.push({type: "BuildingCode", building: (DataTypesInformation.buildings[x].buildingName), code: (DataTypesInformation.buildings[x].code)});
			}
		} // end inBuildingCodes
		
		//function inBuildingInfos( x, searchQuery ) {
		//	if( 0 <= ((DataTypesInformation[x].infoBoxString.toLowerCase()).search(searchQuery.toLowerCase()))){
		//		//add Information and building's name to searchResults array
		//		searchResults.push({type: "Information", building: (DataTypesInformation[x].buildingName), code: (DataTypesInformation[x].code)});
		//	}
		//} // end inBuildingInfos
		
		function inPOINames( x, searchQuery ) {
			if((DataTypesInformation.pois[x].title.toLowerCase()).includes(searchQuery.toLowerCase())){
				//**********************add pois' title and id to searchResults array with its type
				searchResults.push({type: "POIName", building: (DataTypesInformation.pois[x].title), code: (DataTypesInformation.pois[x].id)}); 
			}
		} // end inPOINames
		
		function inParkingNames( x, searchQuery ) {
			if((DataTypesInformation.parking[x].parkingName.toLowerCase()).includes(searchQuery.toLowerCase())){
				//*********************add parking's name and id to searchResults array with its type
				searchResults.push({type: "ParkingName", building: (DataTypesInformation.parking[x].parkingName), code: (DataTypesInformation.parking[x].id)}); 
			}
		} // end inParkingCodes
		
	</script>
	    
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMYzAk4QMdMjpWb7ecr5ImwRaV8xp1sDw&callback=initMap" async defer></script>

    <script src="./js/N-spa.js"></script>
	<!--
	<script src="./js/buildingData.js"></script>
	-->
	<script src="./js/interactions.js"></script>
	<script src="./js/drawings.js"></script>
	<script src="./js/toggle.js"></script>
	<script src="./js/directions.js"></script>

	

    <script type="text/javascript">
        //service worker registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(function(registration) {
                // Registration was successful
                console.log('ServiceWorker registration successful with scope: ' + registration.scope);
            }, function(err) {
                // registration failed :(
                console.log('ServiceWorker registration failed: ' + err);
            });
        }
    </script>

    <!-- javascript -->
<script>
/*This is for managing the building toggle function*/
//$('#sidebar-building').on('click','li.toggleBuilding',function(){
//console.log($(this).data('buildingid'));
//});

/*Corrects map height in desktop and mobile versions*/
$(function(){
	$('#map').height(window.innerHeight - $('#top-navbar').height()-$('#m-b-navbar').height()-3);
});
$(window).resize(function(){
	$('#map').height(window.innerHeight - $('#top-navbar').height()-$('#m-b-navbar').height()-3);
});

//when get directions is clicked => open walkingDirectionsResultsContainer
$(function(){
	$("#walkingSelectionsSubmitButton").click(function(){
		$("#walkingDirectionsResultsContainer").show();				
	});

	$("#closeWalkingDirectionsPanelButton").click(function(){
		$("#walkingDirectionsResultsContainer").hide();
	});
	
});
</script>

    <script>
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <!-- tweet share button -->
    <script>
        window.twttr = (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0],
                t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function(f) {
                t._e.push(f);
            };

            return t;
        }(document, "script", "twitter-wjs"));
    </script>
</body>

</html>